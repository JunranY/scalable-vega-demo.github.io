{"id":"p2Nu","dependencies":[{"name":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/dictionary.js.map","includedInParent":true,"mtime":1620712940685},{"name":"/Users/yangjunran/Desktop/github/sv-demo/package.json","includedInParent":true,"mtime":1620836303330},{"name":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/package.json","includedInParent":true,"mtime":1620712940685},{"name":"../type","loc":{"line":20,"column":23},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/dictionary.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/type.js"},{"name":"../builder","loc":{"line":21,"column":26},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/dictionary.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.DictionaryBuilder=void 0;const e=require(\"../type\"),i=require(\"../builder\");class t extends i.Builder{constructor({type:t,nullValues:s,dictionaryHashFunction:n}){super({type:new e.Dictionary(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=i.Builder.new({type:this.type.indices,nullValues:s}),this.dictionary=i.Builder.new({type:this.type.dictionary,nullValues:null}),\"function\"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,i){const t=this.indices;return i=t.setValid(e,i),this.length=t.length,i}setValue(e,i){const t=this._keysToIndices,s=this.valueToKey(i);let n=t[s];return void 0===n&&(t[s]=n=this._dictionaryOffset+this.dictionary.append(i).length-1),this.indices.setValue(e,n)}flush(){const e=this.type,i=this._dictionary,t=this.dictionary.toVector(),s=this.indices.flush().clone(e);return s.dictionary=i?i.concat(t):t,this.finished||(this._dictionaryOffset+=t.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return\"string\"==typeof e?e:`${e}`}}exports.DictionaryBuilder=t;"},"sourceMaps":{"js":{"mappings":[{"source":"builder/dictionary.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":101}},{"source":"builder/dictionary.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":107}},{"source":"builder/dictionary.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":109}},{"source":"builder/dictionary.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":117}},{"source":"builder/dictionary.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":128}},{"source":"builder/dictionary.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":130}},{"source":"builder/dictionary.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":138}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":152}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":158}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":74},"generated":{"line":1,"column":168}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":74},"generated":{"line":1,"column":170}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":178}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":191}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":196}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":32},"generated":{"line":1,"column":198}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":46},"generated":{"line":1,"column":209}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":53},"generated":{"line":1,"column":211}},{"source":"builder/dictionary.ts","name":null,"original":{"line":38,"column":79},"generated":{"line":1,"column":234}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":238}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":14},"generated":{"line":1,"column":244}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":245}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":1,"column":250}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":254}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":256}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":37},"generated":{"line":1,"column":267}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":42},"generated":{"line":1,"column":269}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":54},"generated":{"line":1,"column":280}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":59},"generated":{"line":1,"column":282}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":68},"generated":{"line":1,"column":290}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":73},"generated":{"line":1,"column":292}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":77},"generated":{"line":1,"column":295}},{"source":"builder/dictionary.ts","name":null,"original":{"line":39,"column":82},"generated":{"line":1,"column":297}},{"source":"builder/dictionary.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":310}},{"source":"builder/dictionary.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":1,"column":315}},{"source":"builder/dictionary.ts","name":null,"original":{"line":40,"column":28},"generated":{"line":1,"column":322}},{"source":"builder/dictionary.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":327}},{"source":"builder/dictionary.ts","name":null,"original":{"line":41,"column":13},"generated":{"line":1,"column":332}},{"source":"builder/dictionary.ts","name":null,"original":{"line":41,"column":33},"generated":{"line":1,"column":350}},{"source":"builder/dictionary.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":352}},{"source":"builder/dictionary.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":357}},{"source":"builder/dictionary.ts","name":null,"original":{"line":42,"column":30},"generated":{"line":1,"column":372}},{"source":"builder/dictionary.ts","name":null,"original":{"line":42,"column":37},"generated":{"line":1,"column":379}},{"source":"builder/dictionary.ts","name":null,"original":{"line":42,"column":44},"generated":{"line":1,"column":386}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":392}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":13},"generated":{"line":1,"column":397}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":405}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":407}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":31},"generated":{"line":1,"column":415}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":35},"generated":{"line":1,"column":419}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":37},"generated":{"line":1,"column":420}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":45},"generated":{"line":1,"column":425}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":1,"column":430}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":55},"generated":{"line":1,"column":435}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":64},"generated":{"line":1,"column":443}},{"source":"builder/dictionary.ts","name":null,"original":{"line":43,"column":78},"generated":{"line":1,"column":454}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":458}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":463}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":1,"column":474}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":1,"column":476}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":34},"generated":{"line":1,"column":484}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":1,"column":488}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":40},"generated":{"line":1,"column":489}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":48},"generated":{"line":1,"column":494}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":53},"generated":{"line":1,"column":499}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":58},"generated":{"line":1,"column":504}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":70},"generated":{"line":1,"column":515}},{"source":"builder/dictionary.ts","name":null,"original":{"line":44,"column":84},"generated":{"line":1,"column":526}},{"source":"builder/dictionary.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":1,"column":533}},{"source":"builder/dictionary.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":1,"column":552}},{"source":"builder/dictionary.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":556}},{"source":"builder/dictionary.ts","name":null,"original":{"line":46,"column":17},"generated":{"line":1,"column":561}},{"source":"builder/dictionary.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":572}},{"source":"builder/dictionary.ts","name":null,"original":{"line":50,"column":4},"generated":{"line":1,"column":575}},{"source":"builder/dictionary.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":588}},{"source":"builder/dictionary.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":1,"column":595}},{"source":"builder/dictionary.ts","name":null,"original":{"line":50,"column":38},"generated":{"line":1,"column":600}},{"source":"builder/dictionary.ts","name":null,"original":{"line":50,"column":46},"generated":{"line":1,"column":608}},{"source":"builder/dictionary.ts","name":null,"original":{"line":51,"column":4},"generated":{"line":1,"column":615}},{"source":"builder/dictionary.ts","name":null,"original":{"line":51,"column":29},"generated":{"line":1,"column":631}},{"source":"builder/dictionary.ts","name":null,"original":{"line":51,"column":36},"generated":{"line":1,"column":638}},{"source":"builder/dictionary.ts","name":null,"original":{"line":51,"column":41},"generated":{"line":1,"column":643}},{"source":"builder/dictionary.ts","name":null,"original":{"line":51,"column":49},"generated":{"line":1,"column":651}},{"source":"builder/dictionary.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":661}},{"source":"builder/dictionary.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":1,"column":678}},{"source":"builder/dictionary.ts","name":null,"original":{"line":52,"column":37},"generated":{"line":1,"column":685}},{"source":"builder/dictionary.ts","name":null,"original":{"line":52,"column":42},"generated":{"line":1,"column":690}},{"source":"builder/dictionary.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":698}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":4},"generated":{"line":1,"column":709}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":30},"generated":{"line":1,"column":726}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":37},"generated":{"line":1,"column":733}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":42},"generated":{"line":1,"column":738}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":50},"generated":{"line":1,"column":746}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":63},"generated":{"line":1,"column":757}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":68},"generated":{"line":1,"column":762}},{"source":"builder/dictionary.ts","name":null,"original":{"line":53,"column":79},"generated":{"line":1,"column":773}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":784}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":34},"generated":{"line":1,"column":805}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":41},"generated":{"line":1,"column":812}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":46},"generated":{"line":1,"column":817}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":54},"generated":{"line":1,"column":825}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":71},"generated":{"line":1,"column":840}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":76},"generated":{"line":1,"column":845}},{"source":"builder/dictionary.ts","name":null,"original":{"line":54,"column":87},"generated":{"line":1,"column":856}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":871}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":38},"generated":{"line":1,"column":896}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":45},"generated":{"line":1,"column":903}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":50},"generated":{"line":1,"column":908}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":58},"generated":{"line":1,"column":916}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":79},"generated":{"line":1,"column":935}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":84},"generated":{"line":1,"column":940}},{"source":"builder/dictionary.ts","name":null,"original":{"line":55,"column":95},"generated":{"line":1,"column":951}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":1,"column":970}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":1,"column":978}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":49},"generated":{"line":1,"column":981}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":56},"generated":{"line":1,"column":988}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":61},"generated":{"line":1,"column":993}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":69},"generated":{"line":1,"column":1001}},{"source":"builder/dictionary.ts","name":null,"original":{"line":56,"column":77},"generated":{"line":1,"column":1009}},{"source":"builder/dictionary.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":1012}},{"source":"builder/dictionary.ts","name":null,"original":{"line":57,"column":20},"generated":{"line":1,"column":1021}},{"source":"builder/dictionary.ts","name":null,"original":{"line":57,"column":35},"generated":{"line":1,"column":1023}},{"source":"builder/dictionary.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":1026}},{"source":"builder/dictionary.ts","name":null,"original":{"line":58,"column":14},"generated":{"line":1,"column":1032}},{"source":"builder/dictionary.ts","name":null,"original":{"line":58,"column":24},"generated":{"line":1,"column":1034}},{"source":"builder/dictionary.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":1039}},{"source":"builder/dictionary.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":1047}},{"source":"builder/dictionary.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":1054}},{"source":"builder/dictionary.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":1056}},{"source":"builder/dictionary.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":1,"column":1058}},{"source":"builder/dictionary.ts","name":null,"original":{"line":59,"column":33},"generated":{"line":1,"column":1067}},{"source":"builder/dictionary.ts","name":null,"original":{"line":59,"column":40},"generated":{"line":1,"column":1069}},{"source":"builder/dictionary.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":1,"column":1072}},{"source":"builder/dictionary.ts","name":null,"original":{"line":60,"column":13},"generated":{"line":1,"column":1077}},{"source":"builder/dictionary.ts","name":null,"original":{"line":60,"column":22},"generated":{"line":1,"column":1084}},{"source":"builder/dictionary.ts","name":null,"original":{"line":60,"column":30},"generated":{"line":1,"column":1086}},{"source":"builder/dictionary.ts","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":1093}},{"source":"builder/dictionary.ts","name":null,"original":{"line":63,"column":11},"generated":{"line":1,"column":1095}},{"source":"builder/dictionary.ts","name":null,"original":{"line":63,"column":20},"generated":{"line":1,"column":1104}},{"source":"builder/dictionary.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":1106}},{"source":"builder/dictionary.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":1109}},{"source":"builder/dictionary.ts","name":null,"original":{"line":64,"column":14},"generated":{"line":1,"column":1115}},{"source":"builder/dictionary.ts","name":null,"original":{"line":64,"column":30},"generated":{"line":1,"column":1117}},{"source":"builder/dictionary.ts","name":null,"original":{"line":64,"column":35},"generated":{"line":1,"column":1122}},{"source":"builder/dictionary.ts","name":null,"original":{"line":65,"column":14},"generated":{"line":1,"column":1137}},{"source":"builder/dictionary.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":1139}},{"source":"builder/dictionary.ts","name":null,"original":{"line":65,"column":25},"generated":{"line":1,"column":1144}},{"source":"builder/dictionary.ts","name":null,"original":{"line":65,"column":36},"generated":{"line":1,"column":1155}},{"source":"builder/dictionary.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":1158}},{"source":"builder/dictionary.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":1162}},{"source":"builder/dictionary.ts","name":null,"original":{"line":66,"column":18},"generated":{"line":1,"column":1164}},{"source":"builder/dictionary.ts","name":null,"original":{"line":66,"column":32},"generated":{"line":1,"column":1166}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1169}},{"source":"builder/dictionary.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":1181}},{"source":"builder/dictionary.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":1185}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":1189}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":1,"column":1191}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":33},"generated":{"line":1,"column":1194}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":39},"generated":{"line":1,"column":1196}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":44},"generated":{"line":1,"column":1201}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":64},"generated":{"line":1,"column":1219}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":69},"generated":{"line":1,"column":1224}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":80},"generated":{"line":1,"column":1235}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":87},"generated":{"line":1,"column":1242}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":94},"generated":{"line":1,"column":1245}},{"source":"builder/dictionary.ts","name":null,"original":{"line":68,"column":103},"generated":{"line":1,"column":1252}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":1255}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":20},"generated":{"line":1,"column":1260}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":28},"generated":{"line":1,"column":1268}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":37},"generated":{"line":1,"column":1277}},{"source":"builder/dictionary.ts","name":null,"original":{"line":70,"column":44},"generated":{"line":1,"column":1279}},{"source":"builder/dictionary.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":1282}},{"source":"builder/dictionary.ts","name":null,"original":{"line":73,"column":8},"generated":{"line":1,"column":1290}},{"source":"builder/dictionary.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":1296}},{"source":"builder/dictionary.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":1298}},{"source":"builder/dictionary.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":1,"column":1303}},{"source":"builder/dictionary.ts","name":null,"original":{"line":74,"column":14},"generated":{"line":1,"column":1308}},{"source":"builder/dictionary.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":1,"column":1310}},{"source":"builder/dictionary.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":1315}},{"source":"builder/dictionary.ts","name":null,"original":{"line":75,"column":14},"generated":{"line":1,"column":1327}},{"source":"builder/dictionary.ts","name":null,"original":{"line":75,"column":21},"generated":{"line":1,"column":1329}},{"source":"builder/dictionary.ts","name":null,"original":{"line":75,"column":26},"generated":{"line":1,"column":1334}},{"source":"builder/dictionary.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":1,"column":1345}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":14},"generated":{"line":1,"column":1356}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":21},"generated":{"line":1,"column":1358}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":26},"generated":{"line":1,"column":1363}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":34},"generated":{"line":1,"column":1371}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":42},"generated":{"line":1,"column":1379}},{"source":"builder/dictionary.ts","name":null,"original":{"line":76,"column":48},"generated":{"line":1,"column":1385}},{"source":"builder/dictionary.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":1388}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1395}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":13},"generated":{"line":1,"column":1397}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":26},"generated":{"line":1,"column":1408}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":33},"generated":{"line":1,"column":1410}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":38},"generated":{"line":1,"column":1412}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":45},"generated":{"line":1,"column":1419}},{"source":"builder/dictionary.ts","name":null,"original":{"line":77,"column":53},"generated":{"line":1,"column":1422}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":1424}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":13},"generated":{"line":1,"column":1429}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":26},"generated":{"line":1,"column":1440}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":31},"generated":{"line":1,"column":1445}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":52},"generated":{"line":1,"column":1464}},{"source":"builder/dictionary.ts","name":null,"original":{"line":78,"column":57},"generated":{"line":1,"column":1466}},{"source":"builder/dictionary.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":1474}},{"source":"builder/dictionary.ts","name":null,"original":{"line":79,"column":13},"generated":{"line":1,"column":1479}},{"source":"builder/dictionary.ts","name":null,"original":{"line":79,"column":27},"generated":{"line":1,"column":1491}},{"source":"builder/dictionary.ts","name":null,"original":{"line":79,"column":32},"generated":{"line":1,"column":1493}},{"source":"builder/dictionary.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":1,"column":1504}},{"source":"builder/dictionary.ts","name":null,"original":{"line":80,"column":13},"generated":{"line":1,"column":1509}},{"source":"builder/dictionary.ts","name":null,"original":{"line":81,"column":15},"generated":{"line":1,"column":1517}},{"source":"builder/dictionary.ts","name":null,"original":{"line":83,"column":11},"generated":{"line":1,"column":1519}},{"source":"builder/dictionary.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":1528}},{"source":"builder/dictionary.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1535}},{"source":"builder/dictionary.ts","name":null,"original":{"line":84,"column":13},"generated":{"line":1,"column":1540}},{"source":"builder/dictionary.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1548}},{"source":"builder/dictionary.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":1557}},{"source":"builder/dictionary.ts","name":null,"original":{"line":85,"column":13},"generated":{"line":1,"column":1562}},{"source":"builder/dictionary.ts","name":null,"original":{"line":85,"column":24},"generated":{"line":1,"column":1573}},{"source":"builder/dictionary.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":1582}},{"source":"builder/dictionary.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":1,"column":1587}},{"source":"builder/dictionary.ts","name":null,"original":{"line":86,"column":33},"generated":{"line":1,"column":1605}},{"source":"builder/dictionary.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":1607}},{"source":"builder/dictionary.ts","name":null,"original":{"line":87,"column":13},"generated":{"line":1,"column":1612}},{"source":"builder/dictionary.ts","name":null,"original":{"line":87,"column":30},"generated":{"line":1,"column":1627}},{"source":"builder/dictionary.ts","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":1634}},{"source":"builder/dictionary.ts","name":null,"original":{"line":87,"column":44},"generated":{"line":1,"column":1641}},{"source":"builder/dictionary.ts","name":null,"original":{"line":88,"column":15},"generated":{"line":1,"column":1647}},{"source":"builder/dictionary.ts","name":null,"original":{"line":88,"column":21},"generated":{"line":1,"column":1653}},{"source":"builder/dictionary.ts","name":null,"original":{"line":90,"column":11},"generated":{"line":1,"column":1662}},{"source":"builder/dictionary.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":1670}},{"source":"builder/dictionary.ts","name":null,"original":{"line":91,"column":8},"generated":{"line":1,"column":1677}},{"source":"builder/dictionary.ts","name":null,"original":{"line":91,"column":13},"generated":{"line":1,"column":1682}},{"source":"builder/dictionary.ts","name":null,"original":{"line":91,"column":21},"generated":{"line":1,"column":1690}},{"source":"builder/dictionary.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":1698}},{"source":"builder/dictionary.ts","name":null,"original":{"line":92,"column":13},"generated":{"line":1,"column":1703}},{"source":"builder/dictionary.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":1,"column":1714}},{"source":"builder/dictionary.ts","name":null,"original":{"line":93,"column":15},"generated":{"line":1,"column":1722}},{"source":"builder/dictionary.ts","name":null,"original":{"line":93,"column":21},"generated":{"line":1,"column":1728}},{"source":"builder/dictionary.ts","name":null,"original":{"line":95,"column":11},"generated":{"line":1,"column":1736}},{"source":"builder/dictionary.ts","name":null,"original":{"line":95,"column":22},"generated":{"line":1,"column":1747}},{"source":"builder/dictionary.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":1,"column":1750}},{"source":"builder/dictionary.ts","name":null,"original":{"line":96,"column":30},"generated":{"line":1,"column":1756}},{"source":"builder/dictionary.ts","name":null,"original":{"line":96,"column":22},"generated":{"line":1,"column":1773}},{"source":"builder/dictionary.ts","name":null,"original":{"line":96,"column":41},"generated":{"line":1,"column":1775}},{"source":"builder/dictionary.ts","name":null,"original":{"line":96,"column":50},"generated":{"line":1,"column":1780}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1785}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1793}},{"source":"builder/dictionary.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1811}}],"sources":{"builder/dictionary.ts":"// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nimport { Vector } from '../vector';\nimport { IntBuilder } from './int';\nimport { Dictionary, DataType } from '../type';\nimport { Builder, BuilderOptions } from '../builder';\n\ntype DictionaryHashFunction = (x: any) => string | number;\n\nexport interface DictionaryBuilderOptions<T extends DataType = any, TNull = any> extends BuilderOptions<T, TNull> {\n    dictionaryHashFunction?: DictionaryHashFunction;\n}\n\n/** @ignore */\nexport class DictionaryBuilder<T extends Dictionary, TNull = any> extends Builder<T, TNull> {\n\n    protected _dictionaryOffset: number;\n    protected _dictionary?: Vector<T['dictionary']>;\n    protected _keysToIndices: { [key: string]: number };\n    public readonly indices: IntBuilder<T['indices']>;\n    public readonly dictionary: Builder<T['dictionary']>;\n\n    constructor({ 'type': type, 'nullValues': nulls, 'dictionaryHashFunction': hashFn }: DictionaryBuilderOptions<T, TNull>) {\n        super({ type: new Dictionary(type.dictionary, type.indices, type.id, type.isOrdered) as T });\n        this._nulls = <any> null;\n        this._dictionaryOffset = 0;\n        this._keysToIndices = Object.create(null);\n        this.indices = Builder.new({ 'type': this.type.indices, 'nullValues': nulls }) as IntBuilder<T['indices']>;\n        this.dictionary = Builder.new({ 'type': this.type.dictionary, 'nullValues': null }) as Builder<T['dictionary']>;\n        if (typeof hashFn === 'function') {\n            this.valueToKey = hashFn;\n        }\n    }\n\n    public get values() { return this.indices.values; }\n    public get nullCount() { return this.indices.nullCount; }\n    public get nullBitmap() { return this.indices.nullBitmap; }\n    public get byteLength() { return this.indices.byteLength + this.dictionary.byteLength; }\n    public get reservedLength() { return this.indices.reservedLength + this.dictionary.reservedLength; }\n    public get reservedByteLength() { return this.indices.reservedByteLength + this.dictionary.reservedByteLength; }\n    public isValid(value: T['TValue'] | TNull) { return this.indices.isValid(value); }\n    public setValid(index: number, valid: boolean) {\n        const indices = this.indices;\n        valid = indices.setValid(index, valid);\n        this.length = indices.length;\n        return valid;\n    }\n    public setValue(index: number, value: T['TValue']) {\n        const keysToIndices = this._keysToIndices;\n        const key = this.valueToKey(value);\n        let idx = keysToIndices[key];\n        if (idx === undefined) {\n            keysToIndices[key] = idx = this._dictionaryOffset + this.dictionary.append(value).length - 1;\n        }\n        return this.indices.setValue(index, idx);\n    }\n    public flush() {\n        const type = this.type;\n        const prev = this._dictionary;\n        const curr = this.dictionary.toVector();\n        const data = this.indices.flush().clone(type);\n        data.dictionary = prev ? prev.concat(curr) : curr;\n        this.finished || (this._dictionaryOffset += curr.length);\n        this._dictionary = data.dictionary as Vector<T['dictionary']>;\n        this.clear();\n        return data;\n    }\n    public finish() {\n        this.indices.finish();\n        this.dictionary.finish();\n        this._dictionaryOffset = 0;\n        this._keysToIndices = Object.create(null);\n        return super.finish();\n    }\n    public clear() {\n        this.indices.clear();\n        this.dictionary.clear();\n        return super.clear();\n    }\n    public valueToKey(val: any): string | number {\n        return typeof val === 'string' ? val : `${val}`;\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"fbb771abe866b1cacf8518c52e667fa9","cacheData":{"env":{}}}