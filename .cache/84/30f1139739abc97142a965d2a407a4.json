{"id":"NfNZ","dependencies":[{"name":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/union.js.map","includedInParent":true,"mtime":1620712940685},{"name":"/Users/yangjunran/Desktop/github/sv-demo/package.json","includedInParent":true,"mtime":1620836303330},{"name":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/package.json","includedInParent":true,"mtime":1620712940685},{"name":"../schema","loc":{"line":20,"column":25},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/union.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/schema.js"},{"name":"./buffer","loc":{"line":21,"column":25},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/union.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/buffer.js"},{"name":"../builder","loc":{"line":22,"column":26},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/union.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder.js"},{"name":"../type","loc":{"line":23,"column":23},"parent":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/builder/union.js","resolved":"/Users/yangjunran/Desktop/github/sv-demo/node_modules/apache-arrow/type.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.DenseUnionBuilder=exports.SparseUnionBuilder=exports.UnionBuilder=void 0;const e=require(\"../schema\"),t=require(\"./buffer\"),s=require(\"../builder\"),i=require(\"../type\");class r extends s.Builder{constructor(e){super(e),this._typeIds=new t.DataBufferBuilder(new Int8Array(0),1),\"function\"==typeof e.valueToChildTypeId&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,t){return this.set(this.length,e,t)}set(e,t,s){return void 0===s&&(s=this._valueToChildTypeId(this,t,e)),this.setValid(e,this.isValid(t))&&this.setValue(e,t,s),this}setValue(e,t,s){this._typeIds.set(e,s),super.setValue(e,t)}addChild(t,s=`${this.children.length}`){const r=this.children.push(t),{type:{children:n,mode:d,typeIds:o}}=this,l=[...n,new e.Field(s,t.type)];return this.type=new i.Union(d,[...o,r],l),r}_valueToChildTypeId(e,t,s){throw new Error(\"Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.\")}}exports.UnionBuilder=r;class n extends r{}exports.SparseUnionBuilder=n;class d extends r{constructor(e){super(e),this._offsets=new t.DataBufferBuilder(new Int32Array(0))}setValue(e,t,s){const i=this.type.typeIdToChildIndex[s];return this._offsets.set(e,this.getChildAt(i).length),super.setValue(e,t,s)}}exports.DenseUnionBuilder=d;"},"sourceMaps":{"js":{"mappings":[{"source":"builder/union.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":149}},{"source":"builder/union.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":155}},{"source":"builder/union.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":157}},{"source":"builder/union.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":165}},{"source":"builder/union.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":178}},{"source":"builder/union.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":180}},{"source":"builder/union.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":188}},{"source":"builder/union.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":200}},{"source":"builder/union.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":202}},{"source":"builder/union.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":210}},{"source":"builder/union.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":224}},{"source":"builder/union.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":226}},{"source":"builder/union.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":234}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":245}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":22},"generated":{"line":1,"column":251}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":73},"generated":{"line":1,"column":261}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":73},"generated":{"line":1,"column":263}},{"source":"builder/union.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":1,"column":271}},{"source":"builder/union.ts","name":null,"original":{"line":32,"column":16},"generated":{"line":1,"column":283}},{"source":"builder/union.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":286}},{"source":"builder/union.ts","name":null,"original":{"line":33,"column":14},"generated":{"line":1,"column":292}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":295}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":300}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":1,"column":309}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":313}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":315}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":46},"generated":{"line":1,"column":333}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":50},"generated":{"line":1,"column":337}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":60},"generated":{"line":1,"column":347}},{"source":"builder/union.ts","name":null,"original":{"line":34,"column":64},"generated":{"line":1,"column":350}},{"source":"builder/union.ts","name":null,"original":{"line":35,"column":53},"generated":{"line":1,"column":353}},{"source":"builder/union.ts","name":null,"original":{"line":35,"column":19},"generated":{"line":1,"column":372}},{"source":"builder/union.ts","name":null,"original":{"line":35,"column":47},"generated":{"line":1,"column":374}},{"source":"builder/union.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":395}},{"source":"builder/union.ts","name":null,"original":{"line":36,"column":17},"generated":{"line":1,"column":400}},{"source":"builder/union.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":420}},{"source":"builder/union.ts","name":null,"original":{"line":36,"column":67},"generated":{"line":1,"column":422}},{"source":"builder/union.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":442}},{"source":"builder/union.ts","name":null,"original":{"line":40,"column":38},"generated":{"line":1,"column":467}},{"source":"builder/union.ts","name":null,"original":{"line":40,"column":45},"generated":{"line":1,"column":474}},{"source":"builder/union.ts","name":null,"original":{"line":40,"column":50},"generated":{"line":1,"column":479}},{"source":"builder/union.ts","name":null,"original":{"line":40,"column":55},"generated":{"line":1,"column":484}},{"source":"builder/union.ts","name":null,"original":{"line":42,"column":11},"generated":{"line":1,"column":503}},{"source":"builder/union.ts","name":null,"original":{"line":42,"column":18},"generated":{"line":1,"column":510}},{"source":"builder/union.ts","name":null,"original":{"line":42,"column":46},"generated":{"line":1,"column":512}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":515}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":15},"generated":{"line":1,"column":522}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":527}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":24},"generated":{"line":1,"column":531}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":536}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":37},"generated":{"line":1,"column":543}},{"source":"builder/union.ts","name":null,"original":{"line":43,"column":44},"generated":{"line":1,"column":545}},{"source":"builder/union.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":548}},{"source":"builder/union.ts","name":null,"original":{"line":46,"column":15},"generated":{"line":1,"column":552}},{"source":"builder/union.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":554}},{"source":"builder/union.ts","name":null,"original":{"line":46,"column":58},"generated":{"line":1,"column":556}},{"source":"builder/union.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":559}},{"source":"builder/union.ts","name":null,"original":{"line":47,"column":28},"generated":{"line":1,"column":571}},{"source":"builder/union.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":575}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":579}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":26},"generated":{"line":1,"column":581}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":31},"generated":{"line":1,"column":586}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":51},"generated":{"line":1,"column":606}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":57},"generated":{"line":1,"column":611}},{"source":"builder/union.ts","name":null,"original":{"line":48,"column":64},"generated":{"line":1,"column":613}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":1,"column":617}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":1,"column":622}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":631}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":1,"column":633}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":38},"generated":{"line":1,"column":638}},{"source":"builder/union.ts","name":null,"original":{"line":50,"column":46},"generated":{"line":1,"column":646}},{"source":"builder/union.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":651}},{"source":"builder/union.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":656}},{"source":"builder/union.ts","name":null,"original":{"line":51,"column":26},"generated":{"line":1,"column":665}},{"source":"builder/union.ts","name":null,"original":{"line":51,"column":33},"generated":{"line":1,"column":667}},{"source":"builder/union.ts","name":null,"original":{"line":51,"column":40},"generated":{"line":1,"column":669}},{"source":"builder/union.ts","name":null,"original":{"line":53,"column":15},"generated":{"line":1,"column":672}},{"source":"builder/union.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":1,"column":677}},{"source":"builder/union.ts","name":null,"original":{"line":56,"column":20},"generated":{"line":1,"column":686}},{"source":"builder/union.ts","name":null,"original":{"line":56,"column":35},"generated":{"line":1,"column":688}},{"source":"builder/union.ts","name":null,"original":{"line":56,"column":55},"generated":{"line":1,"column":690}},{"source":"builder/union.ts","name":null,"original":{"line":57,"column":8},"generated":{"line":1,"column":693}},{"source":"builder/union.ts","name":null,"original":{"line":57,"column":13},"generated":{"line":1,"column":698}},{"source":"builder/union.ts","name":null,"original":{"line":57,"column":22},"generated":{"line":1,"column":707}},{"source":"builder/union.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":711}},{"source":"builder/union.ts","name":null,"original":{"line":57,"column":33},"generated":{"line":1,"column":713}},{"source":"builder/union.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":716}},{"source":"builder/union.ts","name":null,"original":{"line":58,"column":14},"generated":{"line":1,"column":722}},{"source":"builder/union.ts","name":null,"original":{"line":58,"column":23},"generated":{"line":1,"column":731}},{"source":"builder/union.ts","name":null,"original":{"line":58,"column":30},"generated":{"line":1,"column":733}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":736}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":20},"generated":{"line":1,"column":745}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":36},"generated":{"line":1,"column":747}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":46},"generated":{"line":1,"column":752}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":51},"generated":{"line":1,"column":757}},{"source":"builder/union.ts","name":null,"original":{"line":61,"column":60},"generated":{"line":1,"column":766}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":776}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":14},"generated":{"line":1,"column":782}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":784}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":33},"generated":{"line":1,"column":789}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":42},"generated":{"line":1,"column":798}},{"source":"builder/union.ts","name":null,"original":{"line":62,"column":47},"generated":{"line":1,"column":803}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":16},"generated":{"line":1,"column":807}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":22},"generated":{"line":1,"column":813}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":24},"generated":{"line":1,"column":822}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":32},"generated":{"line":1,"column":824}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":34},"generated":{"line":1,"column":829}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":38},"generated":{"line":1,"column":831}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":40},"generated":{"line":1,"column":839}},{"source":"builder/union.ts","name":null,"original":{"line":63,"column":54},"generated":{"line":1,"column":843}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":14},"generated":{"line":1,"column":848}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":23},"generated":{"line":1,"column":850}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":854}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":37},"generated":{"line":1,"column":856}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":41},"generated":{"line":1,"column":860}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":41},"generated":{"line":1,"column":862}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":47},"generated":{"line":1,"column":868}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":53},"generated":{"line":1,"column":870}},{"source":"builder/union.ts","name":null,"original":{"line":64,"column":59},"generated":{"line":1,"column":872}},{"source":"builder/union.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":879}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":886}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":1,"column":891}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":24},"generated":{"line":1,"column":896}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":1,"column":900}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":1,"column":902}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":34},"generated":{"line":1,"column":908}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":40},"generated":{"line":1,"column":910}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":44},"generated":{"line":1,"column":914}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":53},"generated":{"line":1,"column":916}},{"source":"builder/union.ts","name":null,"original":{"line":65,"column":67},"generated":{"line":1,"column":919}},{"source":"builder/union.ts","name":null,"original":{"line":66,"column":15},"generated":{"line":1,"column":922}},{"source":"builder/union.ts","name":null,"original":{"line":71,"column":14},"generated":{"line":1,"column":924}},{"source":"builder/union.ts","name":null,"original":{"line":71,"column":34},"generated":{"line":1,"column":944}},{"source":"builder/union.ts","name":null,"original":{"line":71,"column":67},"generated":{"line":1,"column":946}},{"source":"builder/union.ts","name":null,"original":{"line":71,"column":79},"generated":{"line":1,"column":948}},{"source":"builder/union.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":951}},{"source":"builder/union.ts","name":null,"original":{"line":72,"column":14},"generated":{"line":1,"column":957}},{"source":"builder/union.ts","name":null,"original":{"line":72,"column":18},"generated":{"line":1,"column":961}},{"source":"builder/union.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":967}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":1181}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":1189}},{"source":"builder/union.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":1202}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1204}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":13},"generated":{"line":1,"column":1210}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":76},"generated":{"line":1,"column":1220}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1223}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1231}},{"source":"builder/union.ts","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1250}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":1252}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":13},"generated":{"line":1,"column":1258}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":74},"generated":{"line":1,"column":1268}},{"source":"builder/union.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":1270}},{"source":"builder/union.ts","name":null,"original":{"line":85,"column":16},"generated":{"line":1,"column":1282}},{"source":"builder/union.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":1285}},{"source":"builder/union.ts","name":null,"original":{"line":86,"column":14},"generated":{"line":1,"column":1291}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":1294}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":13},"generated":{"line":1,"column":1299}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":24},"generated":{"line":1,"column":1308}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":28},"generated":{"line":1,"column":1312}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":28},"generated":{"line":1,"column":1314}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":46},"generated":{"line":1,"column":1332}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":50},"generated":{"line":1,"column":1336}},{"source":"builder/union.ts","name":null,"original":{"line":87,"column":61},"generated":{"line":1,"column":1347}},{"source":"builder/union.ts","name":null,"original":{"line":91,"column":11},"generated":{"line":1,"column":1351}},{"source":"builder/union.ts","name":null,"original":{"line":91,"column":20},"generated":{"line":1,"column":1360}},{"source":"builder/union.ts","name":null,"original":{"line":91,"column":35},"generated":{"line":1,"column":1362}},{"source":"builder/union.ts","name":null,"original":{"line":91,"column":55},"generated":{"line":1,"column":1364}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":1367}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":14},"generated":{"line":1,"column":1373}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":27},"generated":{"line":1,"column":1375}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":32},"generated":{"line":1,"column":1380}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":37},"generated":{"line":1,"column":1385}},{"source":"builder/union.ts","name":null,"original":{"line":92,"column":56},"generated":{"line":1,"column":1404}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":8},"generated":{"line":1,"column":1407}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":1414}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":13},"generated":{"line":1,"column":1419}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":22},"generated":{"line":1,"column":1428}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":26},"generated":{"line":1,"column":1432}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":33},"generated":{"line":1,"column":1434}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":38},"generated":{"line":1,"column":1439}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":49},"generated":{"line":1,"column":1450}},{"source":"builder/union.ts","name":null,"original":{"line":93,"column":62},"generated":{"line":1,"column":1453}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1461}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":21},"generated":{"line":1,"column":1467}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":30},"generated":{"line":1,"column":1476}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":37},"generated":{"line":1,"column":1478}},{"source":"builder/union.ts","name":null,"original":{"line":94,"column":44},"generated":{"line":1,"column":1480}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":1484}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":1492}},{"source":"builder/union.ts","name":null,"original":{"line":81,"column":0},"generated":{"line":1,"column":1510}}],"sources":{"builder/union.ts":"// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nimport { Field } from '../schema';\nimport { DataBufferBuilder } from './buffer';\nimport { Builder, BuilderOptions } from '../builder';\nimport { Union, SparseUnion, DenseUnion } from '../type';\n\nexport interface UnionBuilderOptions<T extends Union = any, TNull = any> extends BuilderOptions<T, TNull> {\n    valueToChildTypeId?: (builder: UnionBuilder<T, TNull>, value: any, offset: number) => number;\n}\n\n/** @ignore */\nexport abstract class UnionBuilder<T extends Union, TNull = any> extends Builder<T, TNull> {\n\n    protected _typeIds: DataBufferBuilder<Int8Array>;\n\n    constructor(options: UnionBuilderOptions<T, TNull>) {\n        super(options);\n        this._typeIds = new DataBufferBuilder(new Int8Array(0), 1);\n        if (typeof options['valueToChildTypeId'] === 'function') {\n            this._valueToChildTypeId = options['valueToChildTypeId'];\n        }\n    }\n\n    public get typeIdToChildIndex() { return this.type.typeIdToChildIndex; }\n\n    public append(value: T['TValue'] | TNull, childTypeId?: number) {\n        return this.set(this.length, value, childTypeId);\n    }\n\n    public set(index: number, value: T['TValue'] | TNull, childTypeId?: number) {\n        if (childTypeId === undefined) {\n            childTypeId = this._valueToChildTypeId(this, value, index);\n        }\n        if (this.setValid(index, this.isValid(value))) {\n            this.setValue(index, value, childTypeId);\n        }\n        return this;\n    }\n\n    public setValue(index: number, value: T['TValue'], childTypeId?: number) {\n        this._typeIds.set(index, childTypeId!);\n        super.setValue(index, value);\n    }\n\n    public addChild(child: Builder, name = `${this.children.length}`) {\n        const childTypeId = this.children.push(child);\n        const { type: { children, mode, typeIds } } = this;\n        const fields = [...children, new Field(name, child.type)];\n        this.type = <T> new Union(mode, [...typeIds, childTypeId], fields);\n        return childTypeId;\n    }\n\n    /** @ignore */\n    // @ts-ignore\n    protected _valueToChildTypeId(builder: UnionBuilder<T, TNull>, value: any, offset: number): number {\n        throw new Error(`Cannot map UnionBuilder value to child typeId. \\\nPass the \\`childTypeId\\` as the second argument to unionBuilder.append(), \\\nor supply a \\`valueToChildTypeId\\` function as part of the UnionBuilder constructor options.`);\n    }\n}\n\n/** @ignore */\nexport class SparseUnionBuilder<T extends SparseUnion, TNull = any> extends UnionBuilder<T, TNull> {}\n/** @ignore */\nexport class DenseUnionBuilder<T extends DenseUnion, TNull = any> extends UnionBuilder<T, TNull> {\n\n    protected _offsets: DataBufferBuilder<Int32Array>;\n\n    constructor(options: UnionBuilderOptions<T, TNull>) {\n        super(options);\n        this._offsets = new DataBufferBuilder(new Int32Array(0));\n    }\n\n    /** @ignore */\n    public setValue(index: number, value: T['TValue'], childTypeId?: number) {\n        const childIndex = this.type.typeIdToChildIndex[childTypeId!];\n        this._offsets.set(index, this.getChildAt(childIndex)!.length);\n        return super.setValue(index, value, childTypeId);\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"1c7cc5f90bec2d297122ab766160758a","cacheData":{"env":{}}}